const admin = require('firebase-admin');
const serviceAccount = require('./serviceAccountKey.json');

// Initialize Firebase Admin
admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  projectId: 'eyalamrami-1d69e'
});

const db = admin.firestore();

const FAITH_TOPICS = [
  {
    key: 'shalom-bayit',
    title: 'שלום בית',
    color: '#DC2626',
    verse: '"דרכיה דרכי נעם וכל נתיבותיה שלום" (משלי ג׳, י״ז)',
    summary: 'חיזוק הקשר הזוגי מתוך הקשבה, אחריות ותפילה משותפת. לימוד מסודר מאפשר לתקן דיבור, ליצור אחדות ולבנות אמון.',
    focusPoints: [
      'בחינת הדיבור היומי – האם הוא מחזק או מחליש את שלום הבית',
      'קביעת זמן זוגי קבוע ללא מכשירים',
      'הודאה הדדית על נקודה טובה בכל יום'
    ],
    practices: [
      'פרק אחד בספר "בית של תורה" או "שלום איש ואשתו"',
      'כתיבת מחברת תודה הדדית פעם בשבוע',
      'אמירת פרקי תהילים לישועת הזוגיות (למשל ק״כ-קכ״ט)'
    ],
    sources: [
      'אגרת הרמב״ן – פרשיית הדיבור הרך',
      'בן איש חי – שנה א׳, שופטים, הלכה א׳'
    ],
    spotlight: 'שלום הבית הוא כלי הכרחי לגילוי שכינה בבית יהודי. עבודת הלב והדיבור היא הצינור לאחדות.'
  },
  {
    key: 'parnasa',
    title: 'פרנסה',
    color: '#0f5b8e',
    verse: '"וידעת כי ה׳ אלקיך הוא הנותן לך כח לעשות חיל" (דברים ח׳, י״ח)',
    summary: 'אמונה בהשגחה פרטית בכל ענייני הפרנסה, לצד פעולה מסודרת והשתדלות מתוקנת. לימוד אמיתי מאזן בין תפילה, עבודה ותודעת שפע.',
    focusPoints: [
      'בדיקת אמונות מגבילות סביב כסף והמרתן בפסוקים של ביטחון',
      'מסגרת חשבונאית פשוטה ליום ולשבוע',
      'תרומה קבועה כאקט של אמון במקור השפע'
    ],
    practices: [
      'אמירת "פרשת המן" מדי יום',
      'התבוננות יומית ב-3 השגחות פרטיות מהיום הקודם',
      'קביעת מזמור תהילים קי״ט אות "אמן" לפרנסה בכבוד'
    ],
    sources: [
      'חובת הלבבות – שער הביטחון פרק ג׳',
      'ליקוטי מוהר״ן תנינא, תורה י״א (שפע בפרנסה)'
    ],
    spotlight: 'ככל שהאדם מתקן את הביטחון בה׳, כך נפתחים הצינורות לפרנסה רחבה מתוך שמחה.'
  },
  {
    key: 'chatzot',
    title: 'חצות לילה',
    color: '#4a1d95',
    verse: '"קומי רוני בלילה לראש אשמורות" (איכה ב׳, י״ט)',
    summary: 'קביעת עת ללמוד ולהתבודד בזמן שבו השערים פתוחים במיוחד. חצות היא הזדמנות לרחמים, תשובה ותיקון כללי של היום.',
    focusPoints: [
      'לוח זמנים קצר: קינה, תהילים, התבודדות',
      'שמירה על תודעה רגועה לפני השינה לצורך קימה קלה',
      'שיתוף המשפחה והקהילה במסע החצות לקבלת חיזוק'
    ],
    practices: [
      'אמירת "תיקון חצות" לפחות פעם בשבוע להתחלה',
      'לימוד בספר "ליקוטי הלכות – השכמה לחצות"',
      'כתיבת בקשות אישיות לאחר הלימוד – "מחברת חצות"'
    ],
    sources: [
      'שולחן ערוך אורח חיים, סימן א׳, סעיף ג׳',
      'ליקוטי מוהר״ן תורה רל״ט – מעלת החצות'
    ],
    spotlight: 'החיבור לחצות יוצר האצה בתיקונים ומקרב את האדם לעבודת ה׳ בשמחה ובדבקות.'
  },
  {
    key: 'tefila',
    title: 'תפילה',
    color: '#0c766f',
    verse: '"קרוב ה׳ לכל קוראיו לכל אשר יקראוהו באמת" (תהילים קמ״ה, י״ח)',
    summary: 'תפילה חיה משלבת ביטחון, הודיה, בקשה וקבלת עול מלכות שמיים. לימוד אמונה בתפילה הופך כל דקה לקשר אישי עם הבורא.',
    focusPoints: [
      'כוונת מילות התפילה והבנה פשוטה של הפסוקים',
      'תפילה אישית אחרי כל ברכה שמרגישה קרובה ללב',
      'הכנת רשימת בקשות והודיה יומית מובנית'
    ],
    practices: [
      'לימוד "שערי תפילה" לרב שוורץ או "מסילת ישרים" פרק י״ט',
      'הוספת פרקי תהילים אישיים לפני/אחרי התפילה',
      'התבודדות קצרה של 10 דקות ביום קבוע'
    ],
    sources: [
      'רבינו נחמן מברסלב – שיחות הר״ן, תפילה והתבודדות',
      'רב קוק – עולת ראיה, חלק א׳'
    ],
    spotlight: 'כשהלב פתוח בתפילה, כל היום מתמלא בהשראה, הכוונה ותחושת שליחות מחודשת.'
  }
];

async function seedFaithTopics() {
  try {
    console.log('Starting to seed faith topics...');

    const batch = db.batch();

    FAITH_TOPICS.forEach((topic, index) => {
      const docRef = db.collection('faith_topics').doc(topic.key);
      batch.set(docRef, {
        ...topic,
        order: index,
        createdAt: admin.firestore.FieldValue.serverTimestamp(),
        updatedAt: admin.firestore.FieldValue.serverTimestamp()
      });
      console.log(`Added ${topic.title} to batch`);
    });

    await batch.commit();
    console.log('✅ Successfully seeded faith topics collection!');
    process.exit(0);
  } catch (error) {
    console.error('❌ Error seeding faith topics:', error);
    process.exit(1);
  }
}

seedFaithTopics();
